:root{
  --bg:#0b0d12;
  --panel:#121622;
  --muted:#8fa0b8;
  --text:#e9effa;
  --brand:#5b8cff;
  --brand-2:#8a5bff;
  --danger:#ff6b6b;
  --ok:#16c784;
  --ring: 0 0 0 2px rgba(91,140,255,.35), 0 10px 30px rgba(0,0,0,.4);

  /* new */
  --bg-grad: linear-gradient(180deg,#0b0d12,#0b0d12 40%,#0e1220);
  --ease: cubic-bezier(.2,.7,.2,1);
  --dur: .18s;
}
*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  background: var(--bg-grad);
  color:var(--text);
  font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
  letter-spacing:.1px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a{color:var(--brand); text-decoration:none}
a:hover{opacity:.9}

.app{
  height:100%;
  display:grid;
  grid-template-rows: 56px 1fr;
}

/* ===== Header ===== */
.header{
  height:56px;
  display:flex; align-items:center; justify-content:space-between;
  padding:0 16px;
  border-bottom:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg, rgba(255,255,255,.04), transparent);
  backdrop-filter: blur(6px);
  position:sticky; top:0; z-index:50;
}

.brand{display:flex; align-items:center; gap:10px; font-weight:700}
.brand-badge{
  width:28px; height:28px; border-radius:8px;
  background: radial-gradient(100% 100% at 50% 0%, var(--brand), var(--brand-2));
  box-shadow:var(--ring);
  transition: transform var(--dur) var(--ease);
  animation: badgePulse 3s ease-in-out infinite;
}
.brand:hover .brand-badge{ transform: rotate(6deg) scale(1.06); }
@keyframes badgePulse{
  0%,100%{ filter: drop-shadow(0 0 0 rgba(91,140,255,0)); }
  50%{ filter: drop-shadow(0 0 12px rgba(91,140,255,.35)); }
}

.header .actions{display:flex; gap:8px; align-items:center}

/* ===== Buttons / Inputs ===== */
.btn{
  border:1px solid rgba(255,255,255,.08);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  color:var(--text);
  padding:8px 12px; border-radius:10px; cursor:pointer;
  transition: transform var(--dur) var(--ease), box-shadow var(--dur) var(--ease), background var(--dur) var(--ease), border-color var(--dur) var(--ease), opacity var(--dur) var(--ease);
  will-change: transform;
}
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }

.btn.primary{
  border-color:transparent;
  background:linear-gradient(180deg, var(--brand), var(--brand-2));
  font-weight:600;
}
.btn.primary:hover{
  box-shadow: 0 8px 24px rgba(91,140,255,.35), 0 0 0 1px rgba(91,140,255,.45) inset;
}

.btn.danger{
  background:linear-gradient(180deg, rgba(255,107,107,.9), rgba(255,107,107,.7));
  border-color:transparent
}
.btn:focus{outline:none; box-shadow:var(--ring)}
.input{
  width:100%;
  background:#0e1320; border:1px solid rgba(255,255,255,.07);
  color:var(--text); padding:10px 12px; border-radius:10px;
  transition: box-shadow var(--dur) var(--ease), border-color var(--dur) var(--ease), background var(--dur) var(--ease);
}
.input:focus{outline:none; box-shadow:var(--ring); border-color:transparent}

/* ===== Shell layout ===== */
.shell{
  height:100%;
  display:grid;
  grid-template-columns: 280px 1fr;
}

.sidebar{
  border-right:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg, rgba(255,255,255,.03), transparent);
  padding:12px; overflow:auto;
}
.sidebar .section{margin-bottom:16px}
.sidebar .room{
  display:flex; justify-content:space-between; align-items:center;
  gap:8px; padding:10px; border-radius:10px; cursor:pointer;
  transition: background var(--dur) var(--ease), border-color var(--dur) var(--ease), transform var(--dur) var(--ease);
}
.sidebar .room:hover{background:rgba(255,255,255,.05)}
.sidebar .room.active{
  background:rgba(91,140,255,.18);
  border:1px solid rgba(91,140,255,.4);
  transform: translateY(-1px);
}

/* ===== Content area ===== */
.content{display:grid; grid-template-rows: 44px 1fr 88px; height:100%}
.toolbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 12px; border-bottom:1px solid rgba(255,255,255,.06);
  gap:12px;
}

/* nice background with non-blocking sheen */
.messages{
  position:relative;
  padding:12px; overflow:auto; scroll-behavior:smooth;
  background: radial-gradient(1200px 300px at 30% 0, rgba(91,140,255,.08), transparent 60%);
}
.messages::before{
  content:"";
  position:absolute; inset:-20% -10% auto -10%;
  height:200px;
  background: radial-gradient(600px 120px at 15% 20%, rgba(138,91,255,.12), transparent 60%);
  filter: blur(20px);
  animation: bgFloat 18s linear infinite;
  pointer-events:none;
}
@keyframes bgFloat{
  0%{ transform: translateX(-5%); opacity:.55; }
  50%{ transform: translateX(5%); opacity:.8; }
  100%{ transform: translateX(-5%); opacity:.55; }
}

.message{
  display:flex; gap:10px; margin:10px 0;
}
.bubble{
  max-width: 70%;
  padding:10px 12px; border-radius:12px;
  background:#171b2b; border:1px solid rgba(255,255,255,.06);
  transition: transform var(--dur) var(--ease), box-shadow var(--dur) var(--ease), background var(--dur) var(--ease);
}
.bubble:hover{
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
}
.me .bubble{
  margin-left:auto;
  background:linear-gradient(180deg, rgba(91,140,255,.18), rgba(91,140,255,.12));
  border-color:rgba(91,140,255,.35)
}

.meta{color:var(--muted); font-size:12px; margin-top:2px}
.reaction-bar{display:flex; gap:6px; margin-top:4px}
.reaction{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.1);
  padding:2px 6px; border-radius:999px; cursor:pointer;
  transition: transform var(--dur) var(--ease), background var(--dur) var(--ease);
}
.reaction:hover{background:rgba(255,255,255,.1); transform: translateY(-1px);}

.composer{
  padding:12px; border-top:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg, rgba(255,255,255,.02), transparent);
  backdrop-filter: blur(4px);
}
.composer .row{display:flex; gap:8px}
textarea.input{resize:none; height:64px}
.kbd{border:1px solid rgba(255,255,255,.15); border-bottom-width:2px; padding:0 6px; border-radius:6px; font-size:12px; color:var(--muted)}
.help{color:var(--muted); font-size:12px; padding-top:6px}

/* ===== Auth ===== */
.auth{
  height:100%; display:grid; place-items:center;
}
.card{
  width: min(420px, 92vw);
  background:var(--panel);
  border:1px solid rgba(255,255,255,.08);
  padding:20px; border-radius:16px;
  box-shadow: 0 20px 50px rgba(0,0,0,.45);
  transition: box-shadow var(--dur) var(--ease), transform var(--dur) var(--ease);
}
.card:hover{
  box-shadow: 0 24px 60px rgba(0,0,0,.5);
}

/* utility */
.small{font-size:12px; color:var(--muted)}

/* ====== Responsive additions ====== */

/* touch-friendly */
@media (hover:none), (pointer:coarse){
  .btn{ padding:10px 14px; border-radius:12px; }
  .reaction{ padding:6px 10px; }
  textarea.input{ height:72px; }
}

/* Tablet & small desktop */
@media (max-width: 1100px){
  .shell{ display:flex; flex-direction:column; }

  .sidebar{
    order:0;
    border-right:none;
    border-bottom:1px solid rgba(255,255,255,.06);
    background:linear-gradient(180deg, rgba(255,255,255,.02), transparent);
    padding:8px 12px;
  }

  /* show first “Rooms” section only for compactness */
  .sidebar .section:not(:first-child){ display:none; }

  /* Horizontal, scrollable rooms strip */
  .sidebar .section > div:last-child{
    display:flex;
    gap:8px;
    overflow-x:auto;
    padding-bottom:8px;
    scroll-snap-type:x proximity;
  }
  .sidebar .room{
    display:inline-flex;
    min-width:160px;
    scroll-snap-align:center;
  }

  .content{ order:1; grid-template-rows:52px 1fr 96px; }
  .toolbar{ gap:8px; }
  .toolbar .input{ max-width:none; }
  .bubble{ max-width:85%; }
}

/* Phones */
@media (max-width: 768px){
  .header{ padding:0 10px; }
  .brand{ gap:8px; }
  .brand-badge{ width:24px; height:24px; border-radius:7px; }

  .toolbar{
    flex-direction:column;
    align-items:stretch;
    gap:8px;
  }

  .messages{ padding:10px 8px; }

  .composer{
    position:sticky; bottom:0; z-index:10;
    padding:10px 8px;
  }
  .composer .row{ gap:6px; }

  .sidebar .room{ min-width:130px; }
  .bubble{ border-radius:14px; }
}

/* Scrollbar styling for the horizontal strip & messages */
.sidebar::-webkit-scrollbar{ height:8px; }
.sidebar::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.15); border-radius:10px; }
.messages::-webkit-scrollbar{ width:10px; }
.messages::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.12); border-radius:10px; }

/* Light theme (auto if OS is light; no JS needed) */
@media (prefers-color-scheme: light){
  :root{
    --bg:#f7f9ff;
    --panel:#ffffff;
    --text:#0b0d12;
    --muted:#5a6b82;
    --brand:#3b6cff;
    --brand-2:#6b3bff;
    --danger:#d64a4a;
    --ok:#0ea568;
    --ring: 0 0 0 2px rgba(59,108,255,.25), 0 8px 24px rgba(0,0,0,.12);
    --bg-grad: linear-gradient(180deg,#f7f9ff,#eef2ff 40%,#e9ecff);
  }
  .sidebar{ border-color: rgba(0,0,0,.06); }
  .sidebar .room:hover{ background: rgba(0,0,0,.04); }
  .messages{ background: radial-gradient(1200px 300px at 30% 0, rgba(59,108,255,.06), transparent 60%); }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
}
