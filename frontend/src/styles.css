/* ============================= */
/* Safer theming + responsiveness */
/* ============================= */

/* Use a variable for the whole-page gradient so thereâ€™s always a fallback */
:root{
  --bg-grad: linear-gradient(180deg,#0b0d12,#0b0d12 40%,#0e1220);
}

/* Light theme overrides (toggle via document.documentElement.dataset.theme = 'light') */
:root[data-theme="light"]{
  --bg:#f7f9ff;
  --panel:#ffffff;
  --text:#0b0d12;
  --muted:#5a6b82;
  --brand:#3b6cff;
  --brand-2:#6b3bff;
  --danger:#d64a4a;
  --ok:#0ea568;
  --ring: 0 0 0 2px rgba(59,108,255,.25), 0 8px 24px rgba(0,0,0,.12);
  --bg-grad: linear-gradient(180deg,#f7f9ff,#eef2ff 40%,#e9ecff);
}

/* Apply the gradient via the variable so we never end up with a blank page */
body{ background: var(--bg-grad); }

/* Gentle shimmer on the brand cube (non-blocking eye candy) */
@keyframes badgePulse{
  0%,100%{ filter: drop-shadow(0 0 0 rgba(91,140,255,0)); }
  50%{ filter: drop-shadow(0 0 12px rgba(91,140,255,.35)); }
}
.brand-badge{ animation: badgePulse 3s ease-in-out infinite; }

/* Improve focus ring everywhere */
.input:focus, .btn:focus{ outline:none; box-shadow:var(--ring); }

/* Touch-friendly sizing */
@media (hover:none), (pointer:coarse){
  .btn{ padding:10px 14px; border-radius:12px; }
  .reaction{ padding:6px 10px; }
  textarea.input{ height:72px; }
}

/* Tablet & small desktop */
@media (max-width: 1100px){
  .shell{ display:flex; flex-direction:column; }

  .sidebar{
    order:0;
    border-right:none;
    border-bottom:1px solid rgba(255,255,255,.06);
    background:linear-gradient(180deg, rgba(255,255,255,.02), transparent);
    padding:8px 12px;
  }

  /* Show first "Rooms" section only in compact mode to keep it clean */
  .sidebar .section:not(:first-child){ display:none; }

  /* Horizontal, scrollable rooms strip */
  .sidebar .section > div:last-child{
    display:flex;
    gap:8px;
    overflow-x:auto;
    padding-bottom:8px;
    scroll-snap-type:x proximity;
  }
  .sidebar .room{
    display:inline-flex;
    min-width:160px;
    scroll-snap-align:center;
  }

  .content{ order:1; grid-template-rows:52px 1fr 96px; }
  .toolbar{ gap:8px; }
  .toolbar .input{ max-width:none; }
  .bubble{ max-width:85%; }
}

/* Phones */
@media (max-width: 768px){
  .header{ padding:0 10px; }
  .brand{ gap:8px; }
  .brand-badge{ width:24px; height:24px; border-radius:7px; }

  .toolbar{
    flex-direction:column;
    align-items:stretch;
    gap:8px;
  }

  .messages{ padding:10px 8px; }

  .composer{
    position:sticky; bottom:0; z-index:10;
    padding:10px 8px;
    backdrop-filter: blur(4px);
  }
  .composer .row{ gap:6px; }

  .sidebar .room{ min-width:130px; }
  .bubble{ border-radius:14px; }
}

/* Scrollbar styling for the horizontal strip */
.sidebar::-webkit-scrollbar{ height:8px; }
.sidebar::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.15); border-radius:10px; }
:root[data-theme="light"] .sidebar::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.15); }
